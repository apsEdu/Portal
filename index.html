
<!DOCTYPE html>

<section>
<header class="top-header">
  <img src="7.jpg" class="logo">
 
</header>
<style>
.top-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
}

.logo {
  width: "1000";
  height: auto;
}

</style>


<!-- Local image (must be in the same folder or correct path) -->
    <img src="3.jpg" alt="Best Offers" width="1500">


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>APS.edu School ‚Äì Bright Future For Your Child</title>
<style>

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flying Text Bar</title>
<style>
  /* Container for the flying text */
  .flying-bar {
    position: relative;
    overflow: hidden;
    background-color: #222; /* Bar background */
    color: #ffffff;           /* Text color */
    height: 40px;          /* Bar height */
    display: flex;
    align-items: center;
    font-family: Arial, sans-serif;
    font-size: 18px;
    border-radius: 5px;
  }

  /* The moving text */
  .flying-text {
    position: absolute;
    white-space: nowrap;
    animation: fly 40s linear infinite;
  }

  /* Keyframes for animation */
  @keyframes fly {
    0%   { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }
</style>
</head>
<body>

<div class="flying-bar">
  <div class="flying-text">üöÄ Welcome to APS.edu! Bright Future for Your Child. Enroll your Child to be a part of our Family. Contact Us# +92-345-9627747,   Email:aps.school.oghi@gmail.com</div>

</div>

</body>


<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>APS.EDU ‚Äî Professional School Hub</title>
<style>
  :root{
    --blue:#0d47a1;
    --blue2:#1565c0;
    --white:#ffffff;
    --light:#f5f8ff;
    --gray:#6b7280;
    --dark:#1f2937;
    --accent:#00a8ff;
    --success:#11998e;
    --danger:#e53935;
    --warning:#f59e0b;
    --approved:#e6fffa;
    --pending:#fff7ed;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
    color:var(--dark);
    background:linear-gradient(180deg, var(--light), var(--white));
  }
  header{
    background:linear-gradient(135deg,var(--blue),var(--blue2));
    color:var(--white);
    padding:16px;
    border-bottom:4px solid #eaf2ff;
  }
  .container{max-width:1100px;margin:0 auto;padding:16px}
  .brand{
    display:flex;align-items:center;gap:14px;flex-wrap:wrap
  }
  .logo-wrap{
    width:64px;height:64px;border-radius:12px;background:#eaf2ff;
    display:flex;align-items:center;justify-content:center;overflow:hidden;border:2px solid rgba(255,255,255,0.5)
  }
  .logo-wrap img{width:100%;height:100%;object-fit:cover}
  .title-group h1{margin:0;font-size:24px;letter-spacing:0.5px}
  .title-group p{margin:4px 0 0;font-size:13px;opacity:0.95}
  nav{
    margin-top:12px;display:flex;flex-wrap:wrap;gap:8px
  }
  nav a{
    color:var(--white);text-decoration:none;background:rgba(255,255,255,0.12);
    padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.25)
  }
  nav a:hover{background:rgba(255,255,255,0.2)}
  .panel{
    background:#fff;border:1px solid #e5e7eb;border-radius:12px;
    box-shadow:0 4px 14px rgba(13,71,161,0.06);margin:16px 0;padding:16px
  }
  .panel h2{margin:0 0 12px;font-size:20px;color:var(--blue)}
  .two-col{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media (max-width:900px){.two-col{grid-template-columns:1fr}}
  .badge{
    display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;
    border:1px solid #dbeafe;background:#eef2ff;color:var(--blue);margin-left:6px
  }
  .btn{
    display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;
    border:1px solid #dbeafe;background:#f0f7ff;color:var(--blue);cursor:pointer
  }
  .btn.primary{background:var(--blue);color:#fff;border-color:var(--blue2)}
  .btn.success{background:var(--success);color:#fff;border-color:#0e8c83}
  .btn.warn{background:var(--warning);color:#111827;border-color:#f59e0b}
  .btn.danger{background:var(--danger);color:#fff;border-color:#c62828}
  .btn.outline{background:#fff;color:var(--blue);border-color:var(--blue)}
  .btn.small{padding:6px 10px;font-size:13px}
  .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  @media (max-width:900px){.grid-3{grid-template-columns:1fr}}
  input[type=text], input[type=password], input[type=email], select, textarea{
    width:100%;padding:10px;border:1px solid #d1d5db;border-radius:10px;background:#fff
  }
  textarea{min-height:110px;resize:vertical}
  .muted{color:var(--gray);font-size:13px}
  .item{
    border:1px solid #e5e7eb;border-radius:10px;padding:12px;background:#fff
  }
  .status.approved{background:var(--approved);border-color:#b2f5ea}
  .status.pending{background:var(--pending);border-color:#fed7aa}
  .tag{
    display:inline-block;margin-right:6px;margin-bottom:6px;background:#eef2ff;color:var(--blue);
    border:1px solid #dbeafe;border-radius:8px;padding:4px 8px;font-size:12px
  }
  .flex{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .right{margin-left:auto}
  .hidden{display:none}
  .tools a{
    display:block;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#f8fafc;color:var(--dark);
    text-decoration:none
  }
  .tools a:hover{background:#eef2ff}
  .post-image{max-width:100%;border-radius:10px;border:1px solid #e5e7eb;margin-top:10px}
  .footer{padding:30px;text-align:center;color:#6b7280}
</style>
</head>
<body>

<header>
  <div class="container brand">
    <div class="logo-wrap" id="logoWrap">
      <span style="color:#0d47a1;font-weight:700">APS</span>
    </div>
    <div class="title-group">
      <h1>APS.EDU <span class="badge">Blue & White</span></h1>
      <p>Professional school website for parents, students, and teachers ‚Äî secure homework, updates, and learning tools.</p>
    </div>
    <div class="right">
      <label class="btn outline small" for="logoInput">Upload logo</label>
      <input id="logoInput" type="file" accept="image/*" class="hidden">
    </div>
  </div>
  <div class="container">
    <nav>
      <a href="#about">School overview</a>
      <a href="#staff">Professional staff</a>
      <a href="#student-help">Student help center</a>
      <a href="#homework">Homework (public)</a>
      <a href="#updates">Parent updates</a>
      <a href="#admin">Admin & teachers</a>
    </nav>
  </div>
</header>

<main class="container">
  <section id="about" class="panel">
    <h2>School overview</h2>
    <div class="two-col">
      <div>
        <p><strong>Mission:</strong> APS.EDU delivers a modern, values-based education that balances academics, creativity, and character. We focus on clear communication, community collaboration, and practical learning for every child.</p>
        <p><strong>Programs:</strong> From foundational literacy and numeracy to science, ICT, arts, and physical education, our curriculum builds confidence, curiosity, and real-world skills.</p>
      </div>
      <div>
        <p><strong>Environment:</strong> Our blue-and-white identity stands for trust, clarity, and discipline. Classrooms foster respectful dialogue, project-based learning, and safe digital practice.</p>
        <p><strong>Community:</strong> Parents access homework, class alerts, and photo updates, ensuring transparency and partnership in every child‚Äôs journey.</p>
      </div>
    </div>
  </section>

  <section id="staff" class="panel">
    <h2>Professional teaching staff</h2>
    <div class="grid-3">
      <div class="item">
        <h3>Academic excellence</h3>
        <p class="muted">Qualified teachers with continuous professional development and mentoring. Lesson plans emphasize clarity, inclusivity, and measurable outcomes.</p>
      </div>
      <div class="item">
        <h3>Modern pedagogy</h3>
        <p class="muted">Active learning, formative assessment, and differentiated instruction. Teachers integrate technology responsibly to extend learning beyond the classroom.</p>
      </div>
      <div class="item">
        <h3>Care and guidance</h3>
        <p class="muted">Supportive classroom culture, positive reinforcement, and parental communication. We prioritize student wellbeing alongside academic rigor.</p>
      </div>
    </div>
  </section>

  <section id="student-help" class="panel">
    <h2>Student help center ‚Äî free tools</h2>
    <p class="muted">Admin can edit these links. Students may explore responsibly with parent/teacher guidance.</p>
    <div class="grid-3 tools" id="toolLinks">
      <!-- Links injected by JS -->
    </div>
    <div class="flex" style="margin-top:12px">
      <button class="btn small" id="resetDefaultLinks">Reset to defaults</button>
      <button class="btn small" id="editLinksToggle">Edit links</button>
    </div>
    <div id="editLinks" class="hidden" style="margin-top:12px">
      <div class="item">
        <h3>Edit student tools</h3>
        <div id="linkEditor"></div>
        <div class="flex" style="margin-top:8px">
          <button class="btn success small" id="saveLinks">Save</button>
          <button class="btn outline small" id="cancelLinks">Cancel</button>
        </div>
        <p class="muted">Tip: Prefer reputable, safe, and age-appropriate resources. Verify content before publishing.</p>
      </div>
    </div>

    <div class="panel" style="margin-top:16px">
      <h3>Text to speech ‚Äî listen to your text</h3>
      <div class="two-col">
        <div>
          <label><strong>Text:</strong></label>
          <textarea id="ttsText" placeholder="Type text here..."></textarea>
          <div class="flex" style="margin-top:8px">
            <button class="btn primary small" id="ttsSpeak">Speak</button>
            <button class="btn outline small" id="ttsStop">Stop</button>
          </div>
          <p class="muted">Uses your device‚Äôs built-in voices. Choose language/voice on the right.</p>
        </div>
        <div>
          <label><strong>Voice/language:</strong></label>
          <select id="voiceSelect"></select>
          <label style="margin-top:8px;display:block"><strong>Rate:</strong></label>
          <input type="range" id="voiceRate" min="0.5" max="1.5" step="0.1" value="1" style="width:100%">
          <label style="margin-top:8px;display:block"><strong>Pitch:</strong></label>
          <input type="range" id="voicePitch" min="0.5" max="2" step="0.1" value="1" style="width:100%">
          <p class="muted">For translation, use the ‚ÄúTranslate‚Äù link above, then paste text here to listen.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="homework" class="panel">
    <h2>Homework ‚Äî classwise public view</h2>
    <div class="flex">
      <label><strong>Filter class:</strong></label>
      <select id="homeworkClassFilter"></select>
      <button class="btn small" id="homeworkRefresh">Refresh</button>
    </div>
    <div id="homeworkList" style="margin-top:12px"></div>
  </section>

  <section id="updates" class="panel">
    <h2>Parent updates ‚Äî photos and notices</h2>
    <div id="updatesList"></div>
  </section>

  <section id="admin" class="panel">
    <h2>Admin & teachers portal</h2>

    <div id="authArea" class="two-col">
      <div class="item">
        <h3>Admin login</h3>
        <label><strong>Email:</strong></label>
        <input type="email" id="adminEmail" placeholder="admin@example.com">
        <label style="margin-top:8px"><strong>Password:</strong></label>
        <input type="password" id="adminPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <div class="flex" style="margin-top:10px">
          <button class="btn primary small" id="adminLoginBtn">Login</button>
          <button class="btn warn small" id="adminResetBtn">Reset password</button>
        </div>
        <p class="muted" id="adminAuthMsg"></p>
      </div>

      <div class="item">
        <h3>Teacher login</h3>
        <label><strong>Email:</strong></label>
        <input type="email" id="teacherEmail" placeholder="teacher@example.com">
        <label style="margin-top:8px"><strong>Password:</strong></label>
        <input type="password" id="teacherPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <div class="flex" style="margin-top:10px">
          <button class="btn primary small" id="teacherLoginBtn">Login</button>
        </div>
        <p class="muted" id="teacherAuthMsg"></p>
      </div>
    </div>

    <div id="adminPanel" class="hidden">
      <div class="item">
        <h3>Admin controls</h3>
        <div class="flex">
          <button class="btn outline small" id="logoutAdmin">Logout</button>
          <button class="btn small" id="backupData">Backup (JSON)</button>
          <button class="btn small" id="restoreData">Restore</button>
          <input type="file" id="restoreInput" accept="application/json" class="hidden">
        </div>
        <p class="muted">All data is stored in your browser (localStorage). Use backup/restore to move between devices.</p>
      </div>

      <div class="two-col" style="margin-top:12px">
        <div class="item">
          <h3>Create teacher account</h3>
          <label><strong>Name:</strong></label>
          <input type="text" id="newTeacherName" placeholder="Full name">
          <label style="margin-top:8px"><strong>Email:</strong></label>
          <input type="email" id="newTeacherEmail" placeholder="teacher@aps.edu">
          <label style="margin-top:8px"><strong>Password:</strong></label>
          <input type="password" id="newTeacherPassword" placeholder="Set password">
          <div class="flex" style="margin-top:10px">
            <button class="btn success small" id="createTeacherBtn">Create</button>
          </div>
          <div id="teacherList" style="margin-top:12px"></div>
        </div>

        <div class="item">
          <h3>Post parent update (photo + text)</h3>
          <label><strong>Title:</strong></label>
          <input type="text" id="updateTitle" placeholder="Event or notice title">
          <label style="margin-top:8px"><strong>Details:</strong></label>
          <textarea id="updateText" placeholder="Write a brief update..."></textarea>
          <label style="margin-top:8px"><strong>Photo:</strong></label>
          <input type="file" id="updatePhoto" accept="image/*">
          <div class="flex" style="margin-top:10px">
            <button class="btn success small" id="postUpdateBtn">Post update</button>
          </div>
          <p class="muted">Use the script helper below to generate multilingual post text.</p>
        </div>
      </div>

      <div class="item" style="margin-top:12px">
        <h3>Script helper ‚Äî multilingual post text</h3>
        <div class="two-col">
          <div>
            <label><strong>Topic:</strong></label>
            <select id="scriptTopic">
              <option value="homework_reminder">Homework reminder</option>
              <option value="event_invite">Event invite</option>
              <option value="achievement">Student achievement</option>
              <option value="hygiene_tip">Hygiene tip</option>
              <option value="exam_notice">Exam notice</option>
            </select>
            <label style="margin-top:8px"><strong>Language:</strong></label>
            <select id="scriptLang">
              <option value="en">English</option>
              <option value="ur">Urdu</option>
              <option value="ar">Arabic</option>
              <option value="hi">Hindi</option>
            </select>
            <div class="flex" style="margin-top:10px">
              <button class="btn small" id="generateScript">Generate</button>
              <button class="btn outline small" id="copyScript">Copy</button>
            </div>
          </div>
          <div>
            <label><strong>Script output:</strong></label>
            <textarea id="scriptOutput" placeholder="Generated text will appear here..."></textarea>
            <p class="muted">You can also paste this into Text-to-Speech (above) and select a matching voice.</p>
          </div>
        </div>
      </div>

      <div class="item" style="margin-top:12px">
        <h3>Approve, edit, or delete teacher posts</h3>
        <div id="moderationList"></div>
      </div>
    </div>

    <div id="teacherPanel" class="hidden" style="margin-top:12px">
      <div class="item">
        <div class="flex">
          <h3>Teacher dashboard</h3>
          <button class="btn outline small right" id="logoutTeacher">Logout</button>
        </div>
        <label><strong>Class:</strong></label>
        <select id="teacherClass"></select>
        <label style="margin-top:8px"><strong>Subject:</strong></label>
        <input type="text" id="teacherSubject" placeholder="e.g., Mathematics">
        <label style="margin-top:8px"><strong>Homework details:</strong></label>
        <textarea id="teacherHomework" placeholder="Write clear, actionable homework steps..."></textarea>
        <div class="flex" style="margin-top:10px">
          <button class="btn success small" id="submitHomework">Submit for approval</button>
        </div>
        <p class="muted">Your post will be visible to parents after admin approval. You can edit or withdraw your own pending posts.</p>
        <div id="teacherPosts" style="margin-top:12px"></div>
      </div>
    </div>
  </section>
</main>

<div class="footer">
  APS.EDU ‚Äî A professional, parent-first, student-friendly hub. Built for clarity, trust, and continuous learning.
</div>

<script>
/* ===== Utilities & Storage ===== */
const LS = {
  get(key, fallback){ try{ const v = localStorage.getItem(key); return v? JSON.parse(v): fallback; }catch(e){ return fallback } },
  set(key, val){ localStorage.setItem(key, JSON.stringify(val)); },
  remove(key){ localStorage.removeItem(key); }
};

const State = {
  classes: LS.get('classes', ["Nursery","Prep","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8","Class 9","Class 10"]),
  admin: LS.get('admin', { email:"admin@aps.edu", password:"admin123", loggedIn:false }),
  teachers: LS.get('teachers', []),
  tools: LS.get('tools', [
    {label:"AI tutor ‚Äî multilingual", url:"https://www.khanacademy.org", note:"General learning and practice"},
    {label:"AI voice generator (browser TTS)", url:"#tts", note:"Use Text-to-Speech section below"},
    {label:"Translate text (multilingual)", url:"https://translate.google.com", note:"Type, translate, then listen here"},
    {label:"Free AI photos", url:"https://craiyon.com", note:"Create images from prompts"}
  ]),
  homework: LS.get('homework', []), // {id, class, subject, text, teacherEmail, status:'pending'|'approved', createdAt}
  updates: LS.get('updates', []), // {id,title,text,imageDataUrl, createdAt}
  teacherSessions: {} // ephemeral
};

function saveAll(){
  LS.set('classes', State.classes);
  LS.set('admin', State.admin);
  LS.set('teachers', State.teachers);
  LS.set('tools', State.tools);
  LS.set('homework', State.homework);
  LS.set('updates', State.updates);
}

/* ===== Logo upload ===== */
const logoInput = document.getElementById('logoInput');
const logoWrap = document.getElementById('logoWrap');
logoInput.addEventListener('change', (e)=>{
  const f = e.target.files?.[0];
  if(!f) return;
  const reader = new FileReader();
  reader.onload = () => {
    logoWrap.innerHTML = `<img src="${reader.result}" alt="Logo">`;
    LS.set('logoDataUrl', reader.result);
  };
  reader.readAsDataURL(f);
});
(function loadLogo(){
  const dataUrl = LS.get('logoDataUrl', null);
  if(dataUrl){
    logoWrap.innerHTML = `<img src="${dataUrl}" alt="Logo">`;
  }
})();

/* ===== Tool links (Student help) ===== */
const toolLinks = document.getElementById('toolLinks');
const linkEditor = document.getElementById('linkEditor');
const editLinks = document.getElementById('editLinks');
const editLinksToggle = document.getElementById('editLinksToggle');
const resetDefaultLinks = document.getElementById('resetDefaultLinks');
const saveLinksBtn = document.getElementById('saveLinks');
const cancelLinksBtn = document.getElementById('cancelLinks');

function renderTools(){
  toolLinks.innerHTML = '';
  State.tools.forEach(t=>{
    const a = document.createElement('a');
    a.href = t.url;
    a.target = t.url.startsWith('#')? '_self' : '_blank';
    a.innerHTML = `<strong>${t.label}:</strong> ${t.note}`;
    toolLinks.appendChild(a);
  });
}
renderTools();

editLinksToggle.addEventListener('click', ()=>{
  editLinks.classList.toggle('hidden');
  buildLinkEditor();
});
function buildLinkEditor(){
  linkEditor.innerHTML='';
  State.tools.forEach((t,idx)=>{
    const wrap = document.createElement('div');
    wrap.className='item';
    wrap.innerHTML = `
      <label><strong>Label:</strong></label>
      <input type="text" data-idx="${idx}" data-key="label" value="${t.label}">
      <label style="margin-top:8px"><strong>URL:</strong></label>
      <input type="text" data-idx="${idx}" data-key="url" value="${t.url}">
      <label style="margin-top:8px"><strong>Note:</strong></label>
      <input type="text" data-idx="${idx}" data-key="note" value="${t.note}">
      <div class="flex" style="margin-top:8px">
        <button class="btn danger small" data-del="${idx}">Delete</button>
      </div>
    `;
    linkEditor.appendChild(wrap);
  });
  // add new
  const add = document.createElement('div');
  add.className='flex';
  add.innerHTML = `<button class="btn small" id="addLink">Add link</button>`;
  linkEditor.appendChild(add);

  linkEditor.querySelectorAll('input').forEach(inp=>{
    inp.addEventListener('input', (e)=>{
      const idx = +e.target.dataset.idx;
      const key = e.target.dataset.key;
      State.tools[idx][key] = e.target.value;
    });
  });
  linkEditor.querySelectorAll('[data-del]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const idx = +e.target.dataset.del;
      State.tools.splice(idx,1);
      buildLinkEditor();
    });
  });
  linkEditor.querySelector('#addLink').addEventListener('click', ()=>{
    State.tools.push({label:"New resource", url:"https://", note:"Description"});
    buildLinkEditor();
  });
}
saveLinksBtn.addEventListener('click', ()=>{
  saveAll(); renderTools(); editLinks.classList.add('hidden');
});
cancelLinksBtn.addEventListener('click', ()=>{ editLinks.classList.add('hidden'); renderTools(); });
resetDefaultLinks.addEventListener('click', ()=>{
  State.tools = [
    {label:"AI tutor ‚Äî multilingual", url:"https://www.khanacademy.org", note:"General learning and practice"},
    {label:"AI voice generator (browser TTS)", url:"#tts", note:"Use Text-to-Speech section below"},
    {label:"Translate text (multilingual)", url:"https://translate.google.com", note:"Type, translate, then listen here"},
    {label:"Free AI photos", url:"https://craiyon.com", note:"Create images from prompts"}
  ];
  saveAll(); renderTools();
});

/* ===== Text-to-Speech ===== */
const ttsText = document.getElementById('ttsText');
const voiceSelect = document.getElementById('voiceSelect');
const voiceRate = document.getElementById('voiceRate');
const voicePitch = document.getElementById('voicePitch');
const ttsSpeak = document.getElementById('ttsSpeak');
const ttsStop = document.getElementById('ttsStop');

let voices = [];
function loadVoices(){
  voices = window.speechSynthesis.getVoices();
  voiceSelect.innerHTML='';
  voices.forEach((v, idx)=>{
    const opt = document.createElement('option');
    opt.value = idx;
    opt.textContent = `${v.name} (${v.lang})`;
    voiceSelect.appendChild(opt);
  });
}
loadVoices();
if (typeof speechSynthesis !== 'undefined') {
  speechSynthesis.onvoiceschanged = loadVoices;
}
ttsSpeak.addEventListener('click', ()=>{
  const u = new SpeechSynthesisUtterance(ttsText.value || '');
  const vIdx = +voiceSelect.value;
  u.voice = voices[vIdx] || null;
  u.rate = +voiceRate.value;
  u.pitch = +voicePitch.value;
  speechSynthesis.speak(u);
});
ttsStop.addEventListener('click', ()=>speechSynthesis.cancel());

/* ===== Homework (Public) ===== */
const homeworkClassFilter = document.getElementById('homeworkClassFilter');
const homeworkList = document.getElementById('homeworkList');
const homeworkRefresh = document.getElementById('homeworkRefresh');

function fillClassSelect(sel){
  sel.innerHTML='';
  const all = document.createElement('option');
  all.value='__all__'; all.textContent='All classes';
  sel.appendChild(all);
  State.classes.forEach(c=>{
    const opt = document.createElement('option');
    opt.value = c; opt.textContent = c;
    sel.appendChild(opt);
  });
}
fillClassSelect(homeworkClassFilter);

function renderPublicHomework(){
  const cls = homeworkClassFilter.value;
  const list = State.homework.filter(h=> h.status==='approved' && (cls==='__all__' || h.class===cls));
  homeworkList.innerHTML='';
  if(list.length===0){
    homeworkList.innerHTML = `<p class="muted">No approved homework yet. Please check back.</p>`;
    return;
  }
  list.sort((a,b)=> b.createdAt - a.createdAt).forEach(h=>{
    const div = document.createElement('div');
    div.className='item status approved';
    div.innerHTML = `
      <div class="flex">
        <span class="tag">${h.class}</span>
        <span class="tag">${h.subject}</span>
        <span class="muted right">By: ${h.teacherEmail}</span>
      </div>
      <p>${h.text}</p>
      <p class="muted">Posted: ${new Date(h.createdAt).toLocaleString()}</p>
    `;
    homeworkList.appendChild(div);
  });
}
homeworkRefresh.addEventListener('click', renderPublicHomework);
renderPublicHomework();

/* ===== Parent updates (Public) ===== */
const updatesList = document.getElementById('updatesList');
function renderUpdates(){
  updatesList.innerHTML='';
  if(State.updates.length===0){
    updatesList.innerHTML = `<p class="muted">No updates yet.</p>`;
    return;
  }
  State.updates.sort((a,b)=> b.createdAt - a.createdAt).forEach(u=>{
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML = `
      <h3>${u.title}</h3>
      <p>${u.text}</p>
      ${u.imageDataUrl ? `<img class="post-image" src="${u.imageDataUrl}" alt="Update image">` : ''}
      <p class="muted">Posted: ${new Date(u.createdAt).toLocaleString()}</p>
    `;
    updatesList.appendChild(div);
  });
}
renderUpdates();













/* ===== Auth (Admin & Teacher) ===== */
const adminEmail = document.getElementById('adminEmail');
const adminPassword = document.getElementById('adminPassword');
const adminLoginBtn = document.getElementById('adminLoginBtn');
const adminResetBtn = document.getElementById('adminResetBtn');
const adminAuthMsg = document.getElementById('adminAuthMsg');
const teacherEmail = document.getElementById('teacherEmail');
const teacherPassword = document.getElementById('teacherPassword');
const teacherLoginBtn = document.getElementById('teacherLoginBtn');
const teacherAuthMsg = document.getElementById('teacherAuthMsg');
const adminPanel = document.getElementById('adminPanel');
const teacherPanel = document.getElementById('teacherPanel');
const authArea = document.getElementById('authArea');

adminLoginBtn.addEventListener('click', ()=>{
  if(adminEmail.value===State.admin.email && adminPassword.value===State.admin.password){
    State.admin.loggedIn = true; saveAll();
    adminAuthMsg.textContent = 'Logged in.';
    authArea.classList.add('hidden');
    adminPanel.classList.remove('hidden');
    renderAdminViews();
  } else {
    adminAuthMsg.textContent = 'Invalid admin credentials.';
  }
});
adminResetBtn.addEventListener('click', ()=>{
  const newPass = prompt('Set a new admin password:');
  if(newPass && newPass.trim().length>=4){
    State.admin.password = newPass.trim();
    saveAll();
    adminAuthMsg.textContent = 'Password updated.';
  } else {
    adminAuthMsg.textContent = 'Password not changed.';
  }
});

teacherLoginBtn.addEventListener('click', ()=>{
  const t = State.teachers.find(x=> x.email===teacherEmail.value && x.password===teacherPassword.value);
  if(t){
    State.teacherSessions.email = t.email;
    teacherAuthMsg.textContent = 'Logged in.';
    authArea.classList.add('hidden');
    teacherPanel.classList.remove('hidden');
    renderTeacherViews();
  } else {
    teacherAuthMsg.textContent = 'Invalid teacher credentials.';
  }
});

/* ===== Admin panel actions ===== */
const logoutAdmin = document.getElementById('logoutAdmin');
logoutAdmin.addEventListener('click', ()=>{
  State.admin.loggedIn=false; saveAll();
  adminPanel.classList.add('hidden'); authArea.classList.remove('hidden');
});

const backupData = document.getElementById('backupData');
const restoreData = document.getElementById('restoreData');
const restoreInput = document.getElementById('restoreInput');
backupData.addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify({
    classes:State.classes, admin:State.admin, teachers:State.teachers,
    tools:State.tools, homework:State.homework, updates:State.updates
  }, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href=url; a.download='aps-edu-backup.json'; a.click();
  URL.revokeObjectURL(url);
});
restoreData.addEventListener('click', ()=> restoreInput.click());
restoreInput.addEventListener('change', (e)=>{
  const f = e.target.files?.[0]; if(!f) return;
  const reader = new FileReader();
  reader.onload = ()=>{
    try{
      const data = JSON.parse(reader.result);
      State.classes = data.classes || State.classes;
      State.admin = data.admin || State.admin;
      State.teachers = data.teachers || State.teachers;
      State.tools = data.tools || State.tools;
      State.homework = data.homework || State.homework;
      State.updates = data.updates || State.updates;
      saveAll();
      alert('Restore complete. Reloading.');
      location.reload();
    }catch(err){ alert('Invalid backup file.'); }
  };
  reader.readAsText(f);
});

/* Create teacher accounts */
const newTeacherName = document.getElementById('newTeacherName');
const newTeacherEmail = document.getElementById('newTeacherEmail');
const newTeacherPassword = document.getElementById('newTeacherPassword');
const createTeacherBtn = document.getElementById('createTeacherBtn');
const teacherList = document.getElementById('teacherList');

createTeacherBtn.addEventListener('click', ()=>{
  const name = newTeacherName.value.trim();
  const email = newTeacherEmail.value.trim();
  const password = newTeacherPassword.value.trim();
  if(!name || !email || !password){ alert('Fill all fields.'); return; }
  if(State.teachers.some(t=> t.email===email)){ alert('Teacher email already exists.'); return; }
  State.teachers.push({name,email,password,active:true});
  saveAll();
  newTeacherName.value=''; newTeacherEmail.value=''; newTeacherPassword.value='';
  renderTeacherList();
});

function renderTeacherList(){
  teacherList.innerHTML='';
  if(State.teachers.length===0){
    teacherList.innerHTML = `<p class="muted">No teachers yet.</p>`;
    return;
  }
  State.teachers.forEach((t, idx)=>{
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML = `
      <div class="flex">
        <strong>${t.name}</strong>
        <span class="muted">@${t.email}</span>
        <span class="tag">${t.active? 'Active':'Inactive'}</span>
        <span class="right"></span>
        <button class="btn small warn" data-reset="${idx}">Reset password</button>
        <button class="btn small" data-toggle="${idx}">${t.active?'Disable':'Enable'}</button>
        <button class="btn small danger" data-del="${idx}">Delete</button>
      </div>
    `;
    teacherList.appendChild(div);
  });
  teacherList.querySelectorAll('[data-reset]').forEach(btn=>{
    btn.addEventListener('click',(e)=>{
      const idx = +e.target.dataset.reset;
      const np = prompt('New password for teacher:');
      if(np && np.trim().length>=4){
        State.teachers[idx].password = np.trim(); saveAll(); alert('Password updated.');
      }
    });
  });
  teacherList.querySelectorAll('[data-toggle]').forEach(btn=>{
    btn.addEventListener('click',(e)=>{
      const idx = +e.target.dataset.toggle;
      State.teachers[idx].active = !State.teachers[idx].active; saveAll(); renderTeacherList();
    });
  });
  teacherList.querySelectorAll('[data-del]').forEach(btn=>{
    btn.addEventListener('click',(e)=>{
      const idx = +e.target.dataset.del;
      if(confirm('Delete this teacher?')){
        const email = State.teachers[idx].email;
        // remove their posts too
        State.homework = State.homework.filter(h=> h.teacherEmail!==email);
        State.teachers.splice(idx,1); saveAll(); renderTeacherList(); renderAdminModeration(); renderPublicHomework();
      }
    });
  });
}

/* Post updates with photo */
const updateTitle = document.getElementById('updateTitle');
const updateText = document.getElementById('updateText');
const updatePhoto = document.getElementById('updatePhoto');
const postUpdateBtn = document.getElementById('postUpdateBtn');

postUpdateBtn.addEventListener('click', ()=>{
  const title = updateTitle.value.trim();
  const text = updateText.value.trim();
  if(!title || !text){ alert('Title and details are required.'); return; }
  const file = updatePhoto.files?.[0];
  if(file){
    const reader = new FileReader();
    reader.onload = ()=>{
      State.updates.unshift({id:crypto.randomUUID(), title, text, imageDataUrl:reader.result, createdAt:Date.now()});
      saveAll(); updateTitle.value=''; updateText.value=''; updatePhoto.value=''; renderUpdates();
    };
    reader.readAsDataURL(file);
  }else{
    State.updates.unshift({id:crypto.randomUUID(), title, text, imageDataUrl:null, createdAt:Date.now()});
    saveAll(); updateTitle.value=''; updateText.value=''; renderUpdates();
  }
});

/* Script helper */
const scriptTopic = document.getElementById('scriptTopic');
const scriptLang = document.getElementById('scriptLang');
const scriptOutput = document.getElementById('scriptOutput');
const generateScript = document.getElementById('generateScript');
const copyScript = document.getElementById('copyScript');

const scripts = {
  en: {
    homework_reminder: "Dear parents, today's homework is assigned for {CLASS}. Please ensure your child completes the tasks and brings the work tomorrow. Thank you for your support.",
    event_invite: "We invite you to our {EVENT} on {DATE}. Your presence will encourage our students. Kindly arrive 10 minutes early.",
    achievement: "Congratulations to our {CLASS} students on their excellent performance. We appreciate your guidance at home.",
    hygiene_tip: "Please remind children to wash hands regularly, keep nails trimmed, and wear clean uniforms. Hygiene supports learning.",
    exam_notice: "Exams for {CLASS} begin on {DATE}. Please review the syllabus and ensure proper rest and preparation."
  },
  ur: {
    homework_reminder: "ŸàÿßŸÑÿØ€åŸÜŸê ŸÖÿ≠ÿ™ÿ±ŸÖÿå ÿ¢ÿ¨ {CLASS} ⁄©€í ÿ®⁄ÜŸà⁄∫ ⁄©Ÿà €ÅŸàŸÖ Ÿàÿ±⁄© ÿØ€åÿß ⁄Ø€åÿß €Å€í€î ÿ®ÿ±ÿß€ÅŸê ⁄©ÿ±ŸÖ ÿ®⁄ÜŸà⁄∫ ⁄©Ÿà ŸÖ⁄©ŸÖŸÑ ⁄©ÿ±Ÿàÿß ⁄©ÿ± ⁄©ŸÑ ÿßÿ≥⁄©ŸàŸÑ ÿ®⁄æ€åÿ¨€å⁄∫€î ÿ¥⁄©ÿ±€å€Å€î",
    event_invite: "€ÅŸÖ ÿ¢Ÿæ ⁄©Ÿà {DATE} ⁄©Ÿà €ÅŸàŸÜ€í ŸàÿßŸÑ€í {EVENT} ŸÖ€å⁄∫ ÿ¥ÿ±⁄©ÿ™ ⁄©€å ÿØÿπŸàÿ™ ÿØ€åÿ™€í €Å€å⁄∫€î ÿ¢Ÿæ ⁄©€å ÿ¢ŸÖÿØ ÿ®⁄ÜŸà⁄∫ ⁄©€í ÿ≠ŸàÿµŸÑ€í ⁄©Ÿà ÿ®⁄ë⁄æÿßÿ¶€í ⁄Ø€å€î",
    achievement: "{CLASS} ⁄©€í ÿ∑ŸÑÿ®€Å ⁄©€å ÿ¥ÿßŸÜÿØÿßÿ± ⁄©ÿßÿ±⁄©ÿ±ÿØ⁄Ø€å Ÿæÿ± ŸÖÿ®ÿßÿ±⁄©ÿ®ÿßÿØ€î ⁄Ø⁄æÿ± Ÿæÿ± ÿ±€ÅŸÜŸÖÿßÿ¶€å ⁄©ÿ±ŸÜ€í Ÿæÿ± ÿ¢Ÿæ ⁄©€í ÿ¥⁄©ÿ±⁄Øÿ≤ÿßÿ± €Å€å⁄∫€î",
    hygiene_tip: "ÿ®ÿ±ÿß€ÅŸê ⁄©ÿ±ŸÖ ÿ®⁄ÜŸà⁄∫ ⁄©Ÿà ÿ®ÿßŸÇÿßÿπÿØ⁄Ø€å ÿ≥€í €Åÿßÿ™⁄æ ÿØ⁄æŸàŸÜ€íÿå ŸÜÿßÿÆŸÜ ÿ™ÿ±ÿßÿ¥ŸÜ€í ÿßŸàÿ± ÿµÿßŸÅ €åŸàŸÜ€åŸÅÿßÿ±ŸÖ Ÿæ€ÅŸÜŸÜ€í ⁄©€å ÿ™ÿ±ÿ∫€åÿ® ÿØ€å⁄∫€î ÿµŸÅÿßÿ¶€å ÿ™ÿπŸÑ€åŸÖ ŸÖ€å⁄∫ ŸÖÿØÿØ⁄Øÿßÿ± €Å€í€î",
    exam_notice: "{CLASS} ⁄©€í ÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ {DATE} ÿ≥€í ÿ¥ÿ±Ÿàÿπ €ÅŸà ÿ±€Å€í €Å€å⁄∫€î ÿ®ÿ±ÿß€ÅŸê ⁄©ÿ±ŸÖ ŸÜÿµÿßÿ® ⁄©ÿß ÿ¨ÿßÿ¶ÿ≤€Å ŸÑ€å⁄∫ ÿßŸàÿ± ÿ®⁄ÜŸà⁄∫ ⁄©€å ÿ™€åÿßÿ±€å ŸÖ€å⁄∫ ŸÖÿØÿØ ⁄©ÿ±€å⁄∫€î"
  },
  ar: {
    homework_reminder: "ÿ£ÿπÿ≤Ÿëÿßÿ° ÿ£ŸàŸÑŸäÿßÿ° ÿßŸÑÿ£ŸÖŸàÿ±ÿå ÿ™ŸÖŸë ÿ™ŸÉŸÑŸäŸÅ Ÿàÿßÿ¨ÿ® ŸÖŸÜÿ≤ŸÑŸä ŸÑÿµŸÅ {CLASS} ÿßŸÑŸäŸàŸÖ. ŸÜÿ±ÿ¨Ÿà ŸÖÿ™ÿßÿ®ÿπÿ© ÿ•ÿ™ŸÖÿßŸÖŸá Ÿàÿ•ÿ±ÿ≥ÿßŸÑŸá ÿ∫ÿØŸãÿß. ÿ¥ŸÉÿ±Ÿãÿß ŸÑÿ™ÿπÿßŸàŸÜŸÉŸÖ.",
    event_invite: "ŸÜÿØÿπŸàŸÉŸÖ ŸÑÿ≠ÿ∂Ÿàÿ± ŸÅÿπÿßŸÑŸäÿ© {EVENT} ŸäŸàŸÖ {DATE}. ÿ≠ÿ∂Ÿàÿ±ŸÉŸÖ ŸäÿØÿπŸÖ ÿ∑ŸÑÿßÿ®ŸÜÿß. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸàÿµŸàŸÑ ŸÇÿ®ŸÑ ÿπÿ¥ÿ± ÿØŸÇÿßÿ¶ŸÇ.",
    achievement: "ŸÜŸáŸÜŸëÿ¶ ÿ∑ŸÑÿßÿ® {CLASS} ÿπŸÑŸâ ÿ£ÿØÿßÿ¶ŸáŸÖ ÿßŸÑŸÖÿ™ŸÖŸäÿ≤. ÿ¥ŸÉÿ±Ÿãÿß ŸÑÿØÿπŸÖŸÉŸÖ ÿßŸÑŸÖŸÜÿ≤ŸÑŸä.",
    hygiene_tip: "Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ∞ŸÉŸäÿ± ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿ®ÿ∫ÿ≥ŸÑ ÿßŸÑŸäÿØŸäŸÜ ÿ®ÿßŸÜÿ™ÿ∏ÿßŸÖ ŸàŸÇÿµŸë ÿßŸÑÿ£ÿ∏ÿßŸÅÿ± Ÿàÿßÿ±ÿ™ÿØÿßÿ° ÿ≤Ÿä ŸÜÿ∏ŸäŸÅ. ÿßŸÑŸÜÿ∏ÿßŸÅÿ© ÿ™ÿØÿπŸÖ ÿßŸÑÿ™ÿπŸÑŸëŸÖ.",
    exam_notice: "ÿ™ÿ®ÿØÿ£ ÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ {CLASS} ÿ®ÿ™ÿßÿ±ŸäÿÆ {DATE}. Ÿäÿ±ÿ¨Ÿâ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸÖŸÜŸáÿ¨ ŸàŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑÿ£ÿ®ŸÜÿßÿ° ÿπŸÑŸâ ÿßŸÑÿßÿ≥ÿ™ÿπÿØÿßÿØ."
  },
  hi: {
    homework_reminder: "‡§™‡•ç‡§∞‡§ø‡§Ø ‡§Ö‡§≠‡§ø‡§≠‡§æ‡§µ‡§ï‡•ã‡§Ç, ‡§Ü‡§ú {CLASS} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡•É‡§π‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§∏‡•á ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§µ‡§æ‡§ï‡§∞ ‡§ï‡§≤ ‡§≠‡•á‡§ú‡•á‡§Ç‡•§ ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§",
    event_invite: "{DATE} ‡§ï‡•ã ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á {EVENT} ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§∏‡§æ‡§¶‡§∞ ‡§Ü‡§Æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∏‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§§‡•ç‡§∏‡§æ‡§π ‡§¨‡§¢‡§º‡•á‡§ó‡§æ‡•§",
    achievement: "{CLASS} ‡§ï‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§™‡§∞ ‡§¨‡§ß‡§æ‡§à‡•§ ‡§ò‡§∞ ‡§™‡§∞ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§",
    hygiene_tip: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§π‡§æ‡§• ‡§ß‡•ã‡§®‡•á, ‡§®‡§æ‡§ñ‡•Ç‡§® ‡§ï‡§æ‡§ü‡§®‡•á ‡§î‡§∞ ‡§∏‡§æ‡§´ ‡§Ø‡•Ç‡§®‡§ø‡§´‡•â‡§∞‡•ç‡§Æ ‡§™‡§π‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•à‡•§",
    exam_notice: "{CLASS} ‡§ï‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ‡§è‡§Å {DATE} ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§æ‡§†‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§"
  }
};
generateScript.addEventListener('click', ()=>{
  const lang = scriptLang.value;
  const topic = scriptTopic.value;
  let txt = scripts[lang][topic] || '';
  // Simple placeholders
  txt = txt.replace('{CLASS}', 'Class 5')
           .replace('{EVENT}', 'Parents Meeting')
           .replace('{DATE}', new Date().toLocaleDateString());
  scriptOutput.value = txt;
});
copyScript.addEventListener('click', ()=>{
  scriptOutput.select(); document.execCommand('copy');
  alert('Script copied to clipboard.');
});

/* ===== Admin moderation of homework ===== */
const moderationList = document.getElementById('moderationList');
function renderAdminModeration(){
  moderationList.innerHTML='';
  const list = [...State.homework].sort((a,b)=> b.createdAt - a.createdAt);
  if(list.length===0){ moderationList.innerHTML='<p class="muted">No posts yet.</p>'; return; }
  list.forEach((h, idx)=>{
    const div = document.createElement('div');
    div.className='item ' + (h.status==='approved'?'status approved':'status pending');
    div.innerHTML = `
      <div class="flex">
        <strong>${h.subject}</strong>
        <span class="tag">${h.class}</span>
        <span class="muted">@${h.teacherEmail}</span>
        <span class="right"></span>
        ${h.status==='approved' ? '<span class="badge">Approved</span>' : '<span class="badge">Pending</span>'}
      </div>
      <p>${h.text}</p>
      <div class="flex">
        <button class="btn success small" data-approve="${h.id}">Approve</button>
        <button class="btn warn small" data-edit="${h.id}">Edit</button>
        <button class="btn danger small" data-delete="${h.id}">Delete</button>
      </div>
    `;
    moderationList.appendChild(div);
  });
  moderationList.querySelectorAll('[data-approve]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const id = e.target.dataset.approve;
      const item = State.homework.find(x=> x.id===id);
      if(item){ item.status='approved'; saveAll(); renderAdminModeration(); renderPublicHomework(); }
    });
  });
  moderationList.querySelectorAll('[data-delete]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const id = e.target.dataset.delete;
      if(confirm('Delete this post?')){
        State.homework = State.homework.filter(h=> h.id!==id);
        saveAll(); renderAdminModeration(); renderPublicHomework();
      }
    });
  });
  moderationList.querySelectorAll('[data-edit]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const id = e.target.dataset.edit;
      const item = State.homework.find(x=> x.id===id);
      if(!item) return;
      const newText = prompt('Edit homework text:', item.text);
      if(newText && newText.trim()){
        item.text = newText.trim(); saveAll(); renderAdminModeration(); renderPublicHomework();
      }
    });
  });
}

/* ===== Teacher panel ===== */
const logoutTeacher = document.getElementById('logoutTeacher');
const teacherClass = document.getElementById('teacherClass');
const teacherSubject = document.getElementById('teacherSubject');
const teacherHomework = document.getElementById('teacherHomework');
const submitHomework = document.getElementById('submitHomework');
const teacherPosts = document.getElementById('teacherPosts');

logoutTeacher.addEventListener('click', ()=>{
  State.teacherSessions.email = null;
  teacherPanel.classList.add('hidden'); authArea.classList.remove('hidden');
});

function renderTeacherViews(){
  // classes
  teacherClass.innerHTML='';
  State.classes.forEach(c=>{
    const opt = document.createElement('option'); opt.value=c; opt.textContent=c;
    teacherClass.appendChild(opt);
  });
  // list own posts
  renderTeacherPosts();
}

submitHomework.addEventListener('click', ()=>{
  const email = State.teacherSessions.email;
  const teacherAcc = State.teachers.find(t=> t.email===email);
  if(!teacherAcc || !teacherAcc.active){ alert('Your account is disabled. Contact admin.'); return; }
  const cls = teacherClass.value;
  const subj = teacherSubject.value.trim();
  const txt = teacherHomework.value.trim();
  if(!cls || !subj || !txt){ alert('Fill all fields.'); return; }
  const post = { id: crypto.randomUUID(), class: cls, subject: subj, text: txt, teacherEmail: email, status:'pending', createdAt: Date.now() };
  State.homework.unshift(post);
  saveAll();
  teacherSubject.value=''; teacherHomework.value='';
  renderTeacherPosts(); renderAdminModeration();
  alert('Submitted for admin approval.');
});

function renderTeacherPosts(){
  const email = State.teacherSessions.email;
  const list = State.homework.filter(h=> h.teacherEmail===email).sort((a,b)=> b.createdAt - a.createdAt);
  teacherPosts.innerHTML='';
  if(list.length===0){ teacherPosts.innerHTML='<p class="muted">No posts yet.</p>'; return; }
  list.forEach(h=>{
    const div = document.createElement('div');
    div.className='item ' + (h.status==='approved'?'status approved':'status pending');
    div.innerHTML = `
      <div class="flex">
        <strong>${h.subject}</strong>
        <span class="tag">${h.class}</span>
        <span class="badge">${h.status==='approved'?'Approved':'Pending'}</span>
        <span class="right"></span>
        ${h.status==='pending'
          ? `<button class="btn warn small" data-edit="${h.id}">Edit</button>
             <button class="btn danger small" data-del="${h.id}">Withdraw</button>`
          : ''
        }
      </div>
      <p>${h.text}</p>
    `;
    teacherPosts.appendChild(div);
  });
  teacherPosts.querySelectorAll('[data-edit]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const id = e.target.dataset.edit;
      const item = State.homework.find(x=> x.id===id);
      if(item && item.status==='pending'){
        const nt = prompt('Edit homework:', item.text);
        if(nt && nt.trim()){ item.text = nt.trim(); saveAll(); renderTeacherPosts(); renderAdminModeration(); }
      }
    });
  });
  teacherPosts.querySelectorAll('[data-del]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const id = e.target.dataset.del;
      const item = State.homework.find(x=> x.id===id);
      if(item && item.status==='pending'){
        if(confirm('Withdraw this pending post?')){
          State.homework = State.homework.filter(h=> h.id!==id);
          saveAll(); renderTeacherPosts(); renderAdminModeration();
        }
      }
    });
  });
}

/* ===== Admin view init (if already logged in) ===== */
function renderAdminViews(){
  renderTeacherList(); renderAdminModeration();
}

if(State.admin.loggedIn){
  document.getElementById('authArea').classList.add('hidden');
  document.getElementById('adminPanel').classList.remove('hidden');
  renderAdminViews();
}

/* ===== Public view init ===== */
renderPublicHomework();

</script>
</body>






<Section>

<header> <h2><b><center> Kids Learning Tools</center></b> </h2>



  



   
<div class="tool">
          <div class="icon"><i class="fa-solid fa-language"></i></div>
          <div>
            <h3>Translate any text</h3>
            <p class="red-text">Kid-friendly translation, simplified outputs, multiple languages.</p>
            <a class="btn accent" target="_blank" rel="noopener" href="https://www.bing.com/search?q=free+translation&qs=MT&pq=free+tran&sc=12-9&cvid=78A6C58761784C1FBBF65FC51AB73EBC&FORM=QBRE&sp=1&ghc=1&lq=0/">
              <i class="fa-solid fa-up-right-from-square"></i> For Kids Translator
            </a>
          </div>
        </div>
        <div class="tool">
          <div class="icon"><i class="fa-solid fa-image"></i></div>
          <div>
            <h3>Generate free images</h3>
            <p class="red-text">Create AI art with free daily usage.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="https://stabledifffusion.com//">
                <i class="fa-solid fa-paintbrush"></i> Playground AI
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://artlist.io/text-to-image-ai?utm_source=bing&utm_medium=cpc&utm_campaign=627562036&utm_content=1142394384237317&utm_term=photo%20ai%20generator&keyword=photo%20ai%20generator&ad=&matchtype=e&device=c&msclkid=5fa709eb6c3f11a6ffe9608940f24bce&utm_source=bing&utm_medium=cpc&utm_campaign=GenAI_tCPA&utm_term=photo%20ai%20generator&utm_content=Photo_Generator_%5BGenAI_Image%5D">
                <i class="fa-brands fa-microsoft"></i> Bing Image Creator
              </a>
            </div>
          </div>
        </div>
        <div class="tool">
          <div class="icon"><i class="fa-solid fa-robot"></i></div>
          <div>
            <h3>AI tutor (voice & text)</h3>
            <p class="red-text">Interactive learning assistant for kids.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="https://www.yeschat.ai/features/tutor-ai">
                <i class="fa-solid fa-chalkboard-user"></i> Tutor AI (web)
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://www.yeschat.ai/features/tutor-ai">
                <i class="fa-brands fa-android"></i> Miss SARA.ai (app)
              </a>
            </div>
          </div>
        </div>
        <div class="tool">
          <div class="icon"><i class="fa-solid fa-headphones"></i></div>
          <div>
            <h3>Generate voices</h3>
            <p class="red-text">Make downloadable voiceovers for lessons.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="https://typecast.ai/voices/kid-voice-generator">
                <i class="fa-solid fa-microphone-lines"></i> Typecast Kid Voices
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://voicegenerator.io/?utm_source=copilot.com">
                <i class="fa-solid fa-file-audio"></i> SpeechGen Child TTS
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://voicegenerator.io/?utm_source=copilot.com/">
                <i class="fa-solid fa-volume-high"></i> Voice.ai Child TTS
              </a>
            </div>
          </div>
        </div>
      </div>
     




	<div class="tool">
          <div class="icon"><i class="fa-solid fa-robot"></i></div>
          <div>
            <h1>Photos Gallery</h1>
            <p class="red-text">Facebook Page for Public.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="https://www.facebook.com/aps.oghi.5">
                <i class="fa-solid fa-chalkboard-user"></i> FaceBook Link (web)
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100063967752721">
                <i class="fa-brands fa-android"></i> Facebook Updates (app)
              </a>
            </div>
          </div>
        </div>



<div class="tool">
          <div class="icon"><i class="fa-solid fa-robot"></i></div>
          <div>
            <h1>Whatsapp Ai Tutor </h1>
            <p class="red-text"> learning Ai Whatsapp assistant for kids.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="https://wa.me/ais/886555333823054?s=5">
                <i class="fa-solid fa-chalkboard-user"></i> Ai Free Whatsapp Tutor (web)
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://mkbravo768-cell.github.io/apsschool.edu/index.html">
                <i class="fa-brands fa-android"></i> APS.Edu Website (app)
              </a>
            </div>
          </div>
        </div>


<div class="tool">
          <div class="icon"><i class="fa-solid fa-robot"></i></div>
          <div>
            <h1>Vedios Ai Tutor </h1>
            <p class="red-text"> learning Ai Whatsapp assistant for kids.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="https://wa.me/ais/886555333823054?s=5">
                <i class="fa-solid fa-chalkboard-user"></i> Ai Free Whatsapp Tutor (web)
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://chat.baidu.com/search?pd=csaitab&setype=csaitab&word=%E6%90%9C%E7%B4%A2%E7%B2%BE%E9%80%89&sa=vs_tab&enterType=vs_tab&conversationLogId=10788366801513650712&pageType=landing&browserID=0">
                <i class="fa-brands fa-android"></i> Learn Ai Vedio Genrate (app)
              </a>
            </div>
          </div>
        </div>

 <h2>Latest Updates </h2>
            <p class="red-text"> More Updates for you.</p>
            <div class="toolbar">
              <a class="btn accent" target="_blank" rel="noopener" href="SchoolPortal.html">
                <i class="fa-solid fa-chalkboard-user"><h2></i> More Updates (web)</h2>
              </a>
              <a class="btn ghost" target="_blank" rel="noopener" href="https://mkbravo768-cell.github.io/apsschool.edu/homework.html">
                <i class="fa-brands fa-android"><h2></i> Next Page(app)</h2>
              </a>
            </div>
          </div>
        </div>






 <p class="black-text" style="margin-top:10px">Some tools may require free accounts. Supervise younger children.</p>
    </section>





 </section>









</html>